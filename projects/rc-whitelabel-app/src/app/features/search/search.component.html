<rd-loader [class.rd-hide]="isLoaded">{{ config.i18n.Loading }}</rd-loader>
<div class="rd-search-content" [class.rd-show]="isLoaded">
  <!-- SEARCH FORM -->
  <form #rdSearchForm="ngForm" (ngSubmit)="doSearch(rdSearchInput.value)">
    <mat-form-field floatLabel="never">
      <input
        #rdSearchInput
        name="searchString"
        matInput
        (keyup)="doSearch(rdSearchInput.value)"
        autocomplete="off"
        type="text"
        ngModel
        placeholder="{{ config.i18n.Search_by_name_or_location }}"
        tabindex="1">
      <button
        mat-button
        type="button"
        *ngIf="rdSearchInput.value"
        matSuffix
        mat-icon-button
        aria-label="Clear"
        (click)="searchReset()">
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>
    <mat-error *ngIf="rdSearchInput.value.length >= minChars && searchSuggestions?.length === 0">
      {{ config.i18n.No_matching_search_results }}</mat-error>
  </form>
  <!--  Search Results -->
  <ul [class.open]="!!rdSearchInput.value && !!searchSuggestions" class="rd-search-autofill">

    <li *ngFor="let displayItem of searchSuggestions; let i = index" [tabindex]="i + 1" [ngSwitch]="displayItem.cat">
      <!-- Landmarks -->
      <a *ngSwitchCase="'location'" [routerLink]="displayItem.route">
        <mat-icon>{{ icons['location'] }}</mat-icon>
        {{ displayItem?.name }}
        <span class="rd-flex-spacer"></span>
        <!-- <span>{{ displayItem?.distance | number: '1.0-1' }} km</span>-->
      </a>
      <!-- Restaurants -->
      <a *ngSwitchCase="'restaurant'" [href]="displayItem.spw">
        <mat-icon>{{ icons['restaurant'] }}</mat-icon>
        {{ displayItem?.name }}
        <span class="rd-flex-spacer"></span>
        <span>{{ displayItem.misc }}</span>
      </a>
      <!-- Cuisines -->
      <a *ngSwitchCase="'cuisine'" [routerLink]="displayItem.route">
        <mat-icon>{{ icons['cuisine'] }}</mat-icon>
        {{ displayItem?.name }}
        <span class="rd-flex-spacer"></span>
        <span>{{ displayItem.misc }}</span>
      </a>
    </li>
  </ul>
  <!-- Quick links -->
  <div class="rd-quick-links-container" [class.rd-invisible]="searchSuggestions?.length">
  <section class="rd-quick-links" *ngIf="recentlyViewed?.length">
    <div>
      <mat-icon>{{ icons.recent }}</mat-icon>
      <h2>{{ config.i18n.Recently_viewed }}</h2>
    </div>
    <ul>
      <li *ngFor="let recent of recentlyViewed">
        <a [href]="recent" target="_blank">
          {{ recent.name }}
        </a>
      </li>
    </ul>
  </section>

  <section class="rd-quick-links" *ngIf="landmarks?.length">
    <div>
      <mat-icon>{{ icons.nearest }}</mat-icon>
      <h2>{{ config.i18n.Nearest_to }}</h2>
    </div>
    <ul>
      <li *ngIf="!!currentLocation">
        <a [routerLink]="['/restaurants/nearest/', currentLocation?.coords.latitude + ':' +
        currentLocation?.coords.longitude]">
          {{ config.i18n.My_current_location }}
        </a>
      </li>
      <li *ngFor="let landmark of landmarks">
        <a [routerLink]="['/restaurants/nearest/', landmark?.channel_landmark_lat + ':' + landmark?.channel_landmark_lng]">
          {{ landmark?.channel_landmark_name }}
        </a>
      </li>
    </ul>
  </section>

  <section class="rd-quick-links" *ngIf="cuisines.length">
    <div>
      <mat-icon>{{ icons.cuisine }}</mat-icon>
      <h2>{{ config.i18n.Cuisines }}</h2>
    </div>
    <ul>
      <li *ngFor="let cuisine of cuisines">
        <a [routerLink]="['/restaurants', cuisine.label]">
          {{ cuisine?.label }}
          <span class="rd-flex-spacer"></span>
          <span>{{ cuisine?.total }}</span>
        </a>
      </li>
    </ul>
  </section>

  </div>
</div>
